// Generated by CoffeeScript 1.9.0
(function() {
  var getJson, renderCinemas, renderMovie, renderMovies;

  $(function() {
    console.log('Wat');
    console.log('requesting movies');
    $('#movies').on('click', 'a.movie-info', function() {
      getJson($(this).attr('href'), renderMovie);
      return event.preventDefault();
    });
    return getJson('/movies.json', renderMovies);
  });

  getJson = function(url, callbackFunction) {
    return $.ajax({
      url: url,
      dataType: 'json',
      error: function(jqXHR, textStatus, errorThrown) {
        return console.log("Error " + textStatus + ", " + errorThrown);
      },
      success: callbackFunction
    });
  };

  renderMovie = function(movie) {
    var link, runtime;
    link = $('#movies').find("[data-id='" + movie.id + "']");
    runtime = link.parent().find('.runtime');
    runtime.text(movie.runtime);
    runtime.toggleClass('hidden');
    append("<span>Runtime: " + movie.runtime + "</span>");
    return console.log("Whoooooh " + movie.runtime + "!");
  };

  renderMovies = function(movies) {
    var source, template;
    source = $('#movies-template').html();
    template = Handlebars.compile(source);
    return $('#movies').append(template(movies));
  };

  renderCinemas = function(cinemas) {
    console.log("Found cinemas");
    return console.log(cinemas);
  };

}).call(this);
