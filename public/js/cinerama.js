// Generated by CoffeeScript 1.9.0
(function() {
  var getJson, renderCinemas, renderMovie, renderMovies;

  $(function() {
    console.log('Wat');
    console.log('requesting movies');
    $('#movies').on('click', '.movie-info', function() {
      getJson($(this).attr('href'), renderMovie);
      return event.preventDefault();
    });
    return getJson('/movies.json', renderMovies);
  });

  getJson = function(url, callbackFunction) {
    return $.ajax({
      url: url,
      dataType: 'json',
      error: function(jqXHR, textStatus, errorThrown) {
        return console.log("Error " + textStatus + ", " + errorThrown);
      },
      success: callbackFunction
    });
  };

  renderMovie = function(movie) {
    var banan;
    banan = $('#movies').find("[data-id='" + movie.id + "']");
    banan.parent().append("<span>Runtime: " + movie.runtime + "</span>");
    return console.log("Whoooooh " + movie.runtime + "!");
  };

  renderMovies = function(movies) {
    var movie, movieList, _i, _len;
    movieList = "<ul>";
    for (_i = 0, _len = movies.length; _i < _len; _i++) {
      movie = movies[_i];
      movieList += "<li>";
      movieList += "<div class='movie'>";
      movieList += "<a data-id='" + movie.id + "' class='movie-info' href='/movie.json/" + movie.id + "'>" + movie.name + "</a>";
      movieList += "</div>";
      movieList += "</li>";
    }
    movieList += "</ul>";
    return $('#movies').append(movieList);
  };

  renderCinemas = function(cinemas) {
    console.log("Found cinemas");
    return console.log(cinemas);
  };

}).call(this);
